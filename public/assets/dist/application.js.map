{"version":3,"sources":["app.js","meshblu-service.js","triggers-controller.js","home/home-controller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"application.js","sourcesContent":["'use strict';\n\nangular.module('blu', ['ngCookies', 'ngRoute'])\n.config(function($routeProvider) {\n        $routeProvider\n            // route for the home page\n            .when('/', {\n                templateUrl : '../../angular/home/index.html',\n                controller  : 'HomeController'\n            })\n\t\t\t.otherwise( { redirectTo: \"/\" });\n    })\n  .run(function($rootScope, $location) {\n\n  });\n\n","angular.module('blu')\n  .service('meshbluService', function($http, $q, $cookies) {\n    var self = this, conn, creds = {};\n\n    self.getCredentials = function() {\n      return $q.when({\n        uuid : $cookies.meshblu_uuid,\n        token : $cookies.meshblu_token\n      });\n    };\n\n    self.saveCredentials = function(credentials) {\n    \tcreds = credentials;\n      $cookies.meshblu_uuid = credentials.uuid;\n      $cookies.meshblu_token = credentials.token;\n    };\n\n    self.start = function(resolve, reject) {\n      self.getCredentials()\n        .then(function(creds) {\n        \tif(conn){\n        \t\tresolve(conn);\n        \t\treturn;\n        \t}\n          conn = meshblu.createConnection(creds);\n          conn.on('ready', function(data) {\n            console.log('Connected to Meshblu', data);\n            resolve(conn);\n          });\n          conn.on('notReady', function() {\n            console.log('Not connected to Meshblu');\n\n            conn.register({\n              'type': 'octobluDashboard'\n            }, function(data) {\n              console.log(data);\n              self.saveCredentials(data);\n\n              conn.authenticate({\n                'uuid': data.uuid,\n                'token': data.token\n              }, function(data) {\n                console.log(data);\n              });\n            });\n          });\n          conn.on('disconnect', function(){\n          \treject();\n          });\n        });\n    };\n\n    self.getConnection = function(resolve, reject) {\n      if (conn) {\n        resolve(conn, creds);\n      } else {\n        self.start(function(){\n        \tresolve(conn, creds);\n        }, function(){\n        \treject();\n        });\n      }\n    };\n\n    return self;\n  });\n","'use strict';\n\nangular.module('blu')\n  .controller('triggersController', function($scope, meshbluService){\n\n    meshbluService.getConnection(function(conn){\n      console.log('Connected');\n    });\n  });\n","'use strict';\n\nangular.module('blu')\n  .controller('HomeController', function($scope, $location){\n    $scope.login = function(){\n      $location.path('/login');\n    };\n\n    $scope.register = function(){\n      $location.path('/register');\n    }\n  });\n"],"sourceRoot":"/source/"}